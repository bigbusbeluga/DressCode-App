{% extends 'main.html' %}
{% block title %}
MixMatch - DressCode
{% endblock %}

{% block content %}
    <aside id="logo-sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0" aria-label="Sidebar">
        <div class="h-full px-3 py-4 overflow-y-auto bg-[#F9F9F9]">
            <a href="#" class="flex items-center ps-2.5 mb-5">
                <img src="" class="w-auto h-auto" alt="DressCode Logo" />
            </a>
            <ul class="font-extrabold">
                <li>
                    <a href="#" class="flex items-center p-2 text-gray-700 rounded-lg hover:bg-blue-200 group">
                        <span class="material-symbols-rounded">home</span>
                        <span class="ms-3">Home</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="flex items-center p-2 text-gray-700 rounded-lg hover:bg-blue-200 group">
                        <span class="material-symbols-rounded">dresser</span>
                        <span class="flex-1 ms-3 whitespace-nowrap">Wardrobe</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="flex items-center p-2 text-gray-700 rounded-lg hover:bg-blue-200 group">
                        <span class="material-symbols-rounded">calendar_month</span>
                        <span class="flex-1 ms-3 whitespace-nowrap">Calendar</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="flex items-center p-2 text-gray-700 rounded-lg hover:bg-blue-200 group">
                        <span class="material-symbols-rounded">laundry</span>
                        <span class="flex-1 ms-3 whitespace-nowrap">Laundry</span>
                        <span class="inline-flex items-center justify-center w-3 h-3 p-3 ms-3 text-sm font-medium text-blue-800 bg-blue-100 rounded-full">3</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="flex items-center p-2 text-gray-700 rounded-lg hover:bg-blue-200 group">
                        <span class="material-symbols-rounded">tune</span>
                        <span class="flex-1 ms-3 whitespace-nowrap">Mix & Match</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="flex items-center p-2 text-gray-700 rounded-lg hover:bg-blue-200 group">
                        <span class="material-symbols-rounded">settings</span>
                        <span class="flex-1 ms-3 whitespace-nowrap">Settings</span>
                    </a>
                </li>
            </ul>
        </div>
    </aside>

    <main class="p-4 sm:ml-64">
        <h2 class="text-4xl font-bold mb-4 text-gray-700">Outfit Canvas</h2>
        <!-- Flex container for the two sections -->
        <div class="flex gap-4">
            <!-- Outfit Canvas -->
            <section class="w-1/3 bg-white rounded-2xl p-4 flex flex-col items-center">
                <div id="outfit-canvas" class="w-72 h-[500px] border rounded-xl p-4 flex flex-wrap justify-center items-center gap-4 bg-[#fefefe] shadow-md">
                    <!-- Dynamically added clothes will appear here -->
                </div>
                <button class="mt-4 bg-pink-300 text-black rounded-full px-6 py-2 font-semibold">Save Outfit</button>
            </section>

            <!-- Clothes Collection -->
            <section class="border flex-1 bg-[#e9f4ff] rounded-2xl p-4 overflow-y-auto shadow-md">
                <div class="flex justify-between mb-4">
                    <div class="flex gap-2">
                        <button class="rounded-full px-4 py-1 bg-white border">ALL</button>
                        <button class="rounded-full px-4 py-1 bg-white border">Tops</button>
                        <button class="rounded-full px-4 py-1 bg-white border">Bottoms</button>
                        <button class="rounded-full px-4 py-1 bg-white border">Footwear</button>
                        <button class="rounded-full px-4 py-1 bg-white border">Accessories</button>
                    </div>
                    <button class="bg-pink-300 px-4 py-1 rounded-md">Upload</button>
                </div>
                <div class="grid grid-cols-3 gap-4">
                    {% for item in clothes %}
                    <div class="bg-white p-2 rounded-xl shadow flex flex-col items-center">
                        <img src="{{ item.image.url }}" alt="Clothing" class="h-28 object-contain">
                        <button onclick="addToCanvas('{{ item.image.url }}')" class="mt-2 text-sm bg-white border border-black px-2 py-1 rounded-md">Add</button>
                    </div>
                    {% endfor %}
                </div>
            </section>
        </div>
    </main>

   <!-- Overlay Modal (responsive) -->
<div id="upload-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-2" style="display: none;">
  <div class="relative bg-white rounded-2xl shadow-lg w-full h-full max-w-[1300px] max-h-[900px] p-4 sm:p-8 flex flex-col border-4 border-gray-300 overflow-auto">
    <button onclick="document.getElementById('upload-modal').style.display='none'"
      class="absolute top-4 right-4 text-3xl text-gray-400 hover:text-black font-bold">&times;</button>
    <h2 class="text-3xl font-bold mb-6">Upload Image</h2>
    <div class="flex flex-col items-center justify-center flex-1 py-8">
      <label class="inline-block px-6 py-2 bg-gray-200 rounded-full font-semibold cursor-pointer hover:bg-gray-300">
        <input type="file" class="hidden" multiple>
        Choose Files
      </label>
      <p class="mt-8 text-xs text-gray-500 text-center">
        Upload your images and videos here by dragging and dropping or select from your device<br>
        Files types supported: JPG, PNG, MP4<br>
        Max size: 20 MB
      </p>
    </div>
  </div>
</div>
<!-- Example trigger button (place this wherever you want to open the modal) -->
<button onclick="document.getElementById('upload-modal').style.display='flex'"
  class="bg-pink-300 px-4 py-2 rounded-md mt-8">Open Upload Modal</button>

    <script>
        function addToCanvas(imageUrl) {
            const img = document.createElement('img');
            img.src = imageUrl;
            img.className = 'h-24';
            document.getElementById('outfit-canvas').appendChild(img);
        }
    </script>
{% endblock %}
